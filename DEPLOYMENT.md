# æ«»å‚ 46ãƒ»æ¬…å‚ 46 ãƒ–ãƒ­ã‚°ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ãƒ„ãƒ¼ãƒ« ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆã‚¬ã‚¤ãƒ‰

ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§ã¯ã€æœ¬ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’åˆ¥ã®ç’°å¢ƒã«ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹æ‰‹é †ã‚’èª¬æ˜ã—ã¾ã™ã€‚

## ç›®æ¬¡

- [ã‚·ã‚¹ãƒ†ãƒ è¦ä»¶](#ã‚·ã‚¹ãƒ†ãƒ è¦ä»¶)
- [ç’°å¢ƒåˆ¥ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—](#ç’°å¢ƒåˆ¥ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—)
- [åˆå›ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †](#åˆå›ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †)
- [è¨­å®šã¨ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º](#è¨­å®šã¨ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º)
- [ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°](#ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°)
- [ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã¨ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹](#ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã¨ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹)

---

## ã‚·ã‚¹ãƒ†ãƒ è¦ä»¶

### å¿…é ˆã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢

- **Node.js**: v18.0.0 ä»¥ä¸Šï¼ˆæ¨å¥¨: v20.x LTSï¼‰
- **npm**: v9.0.0 ä»¥ä¸Š
- **Git**: ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ç”¨ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰

### ã‚·ã‚¹ãƒ†ãƒ ãƒªã‚½ãƒ¼ã‚¹

- **ãƒ‡ã‚£ã‚¹ã‚¯å®¹é‡**: æœ€ä½ 2GB ä»¥ä¸Šï¼ˆç”»åƒä¿å­˜ç”¨ã«è¿½åŠ å®¹é‡ãŒå¿…è¦ï¼‰
- **ãƒ¡ãƒ¢ãƒª**: æœ€ä½ 1GB RAMï¼ˆæ¨å¥¨: 2GB ä»¥ä¸Šï¼‰
- **ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯**: ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆæ¥ç¶šå¿…é ˆ

### å¯¾å¿œ OS

- macOS 10.15 ä»¥ä¸Š
- Windows 10/11
- Linux (Ubuntu 20.04 ä»¥ä¸Šã€Debian 11 ä»¥ä¸Šã€CentOS 8 ä»¥ä¸Š)

---

## ç’°å¢ƒåˆ¥ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### A. ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒ

#### 1. Node.js ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

**macOS:**

```bash
# Homebrewã‚’ä½¿ç”¨
brew install node

# ã¾ãŸã¯å…¬å¼ã‚µã‚¤ãƒˆã‹ã‚‰ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
# https://nodejs.org/
```

**Windows:**

```powershell
# å…¬å¼ã‚µã‚¤ãƒˆã‹ã‚‰ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ©ãƒ¼ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
# https://nodejs.org/

# ã¾ãŸã¯wingetã‚’ä½¿ç”¨
winget install OpenJS.NodeJS.LTS
```

**Linux (Ubuntu/Debian):**

```bash
# NodeSource repositoryã‚’ä½¿ç”¨
curl -fsSL https://deb.nodesource.com/setup_20.x | sudo -E bash -
sudo apt-get install -y nodejs

# ãƒ“ãƒ«ãƒ‰ãƒ„ãƒ¼ãƒ«ã‚‚å¿…è¦
sudo apt-get install -y build-essential
```

**Linux (CentOS/RHEL):**

```bash
# NodeSource repositoryã‚’ä½¿ç”¨
curl -fsSL https://rpm.nodesource.com/setup_20.x | sudo bash -
sudo yum install -y nodejs

# ãƒ“ãƒ«ãƒ‰ãƒ„ãƒ¼ãƒ«ã‚‚å¿…è¦
sudo yum groupinstall 'Development Tools'
```

#### 2. ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ç¢ºèª

```bash
node --version  # v18ä»¥ä¸Šã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèª
npm --version   # v9ä»¥ä¸Šã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèª
```

---

### B. ã‚¯ãƒ©ã‚¦ãƒ‰ç’°å¢ƒ

#### AWS EC2

**1. EC2 ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®ä½œæˆ**

- AMI: Ubuntu Server 22.04 LTS
- ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚¿ã‚¤ãƒ—: t2.micro ä»¥ä¸Šï¼ˆæ¨å¥¨: t2.smallï¼‰
- ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸: 20GB ä»¥ä¸Šï¼ˆç”»åƒä¿å­˜é‡ã«å¿œã˜ã¦èª¿æ•´ï¼‰
- ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚°ãƒ«ãƒ¼ãƒ—:
  - SSH (22) - ç®¡ç†ç”¨
  - HTTP (80) ã¾ãŸã¯ ã‚«ã‚¹ã‚¿ãƒ  TCP (3000) - Web ãƒ“ãƒ¥ãƒ¼ã‚¢ãƒ¼ç”¨ï¼ˆå¿…è¦ã«å¿œã˜ã¦ï¼‰

**2. æ¥ç¶šã¨ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—**

```bash
# SSHã§æ¥ç¶š
ssh -i your-key.pem ubuntu@your-instance-ip

# ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆ
sudo apt update && sudo apt upgrade -y

# Node.jsã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
curl -fsSL https://deb.nodesource.com/setup_20.x | sudo -E bash -
sudo apt-get install -y nodejs build-essential

# å¿…è¦ãªã‚·ã‚¹ãƒ†ãƒ ãƒ©ã‚¤ãƒ–ãƒ©ãƒªï¼ˆPlaywrightç”¨ï¼‰
sudo apt-get install -y \
    libnss3 \
    libatk1.0-0 \
    libatk-bridge2.0-0 \
    libcups2 \
    libdrm2 \
    libxkbcommon0 \
    libxcomposite1 \
    libxdamage1 \
    libxfixes3 \
    libxrandr2 \
    libgbm1 \
    libasound2
```

**3. ç”»åƒã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚ªãƒ—ã‚·ãƒ§ãƒ³**

EC2 ã§ã¯ä»¥ä¸‹ã®æ–¹æ³•ã§ç”»åƒã‚’ä¿å­˜ã§ãã¾ã™ï¼š

**ã‚ªãƒ—ã‚·ãƒ§ãƒ³ A: ãƒ­ãƒ¼ã‚«ãƒ«ãƒ‡ã‚£ã‚¹ã‚¯ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã€è¨­å®šä¸è¦ï¼‰**

```bash
# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«images/ãƒ•ã‚©ãƒ«ãƒ€ãŒè‡ªå‹•ä½œæˆã•ã‚Œã‚‹
# è¿½åŠ è¨­å®šä¸è¦ã§å‹•ä½œ
```

**ã‚ªãƒ—ã‚·ãƒ§ãƒ³ B: S3 ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ï¼ˆå¤§è¦æ¨¡é‹ç”¨å‘ã‘ï¼‰**

```bash
# ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®š
export STORAGE_TYPE=s3
export S3_BUCKET=your-bucket-name
export S3_REGION=ap-northeast-1
export S3_BASE_URL=https://your-cloudfront-domain.cloudfront.net

# ã¾ãŸã¯.envãƒ•ã‚¡ã‚¤ãƒ«ã«è¨˜è¼‰
```

**æ¨å¥¨æ§‹æˆ:**

- å°ã€œä¸­è¦æ¨¡ï¼ˆã€œ10GB ç”»åƒï¼‰: ãƒ­ãƒ¼ã‚«ãƒ«ãƒ‡ã‚£ã‚¹ã‚¯ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰
- å¤§è¦æ¨¡ï¼ˆ10GB ä»¥ä¸Šï¼‰: S3 + CloudFront

#### Google Cloud Platform (GCP)

**1. Compute Engine ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ä½œæˆ**

```bash
gcloud compute instances create sakurazaka-blog \
  --image-family=ubuntu-2204-lts \
  --image-project=ubuntu-os-cloud \
  --machine-type=e2-small \
  --boot-disk-size=20GB \
  --zone=asia-northeast1-a
```

**2. æ¥ç¶šã¨ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—**

```bash
# SSHæ¥ç¶š
gcloud compute ssh sakurazaka-blog --zone=asia-northeast1-a

# Node.jsã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆAWS EC2ã¨åŒã˜æ‰‹é †ï¼‰
```

#### Azure VM

**1. VM ã®ä½œæˆ**

```bash
az vm create \
  --resource-group sakurazaka-rg \
  --name sakurazaka-blog \
  --image UbuntuLTS \
  --size Standard_B1s \
  --admin-username azureuser \
  --generate-ssh-keys
```

**2. æ¥ç¶šã¨ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—**

```bash
# SSHæ¥ç¶š
ssh azureuser@your-vm-ip

# Node.jsã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆAWS EC2ã¨åŒã˜æ‰‹é †ï¼‰
```

#### Docker ã‚³ãƒ³ãƒ†ãƒŠï¼ˆæ¨å¥¨ï¼‰

**Dockerfile:**

```dockerfile
FROM node:20-slim

# Playwrightã®ä¾å­˜é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
RUN apt-get update && apt-get install -y \
    libnss3 \
    libatk1.0-0 \
    libatk-bridge2.0-0 \
    libcups2 \
    libdrm2 \
    libxkbcommon0 \
    libxcomposite1 \
    libxdamage1 \
    libxfixes3 \
    libxrandr2 \
    libgbm1 \
    libasound2 \
    && rm -rf /var/lib/apt/lists/*

WORKDIR /app

# package.jsonã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ä¾å­˜é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
COPY package*.json ./
RUN npm ci

# Playwrightãƒ–ãƒ©ã‚¦ã‚¶ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
RUN npx playwright install chromium

# ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚³ãƒ”ãƒ¼
COPY . .

# ãƒ‡ãƒ¼ã‚¿æ°¸ç¶šåŒ–ç”¨ã®ãƒœãƒªãƒ¥ãƒ¼ãƒ 
VOLUME ["/app/images", "/app/sakurazaka_blog.db", "/app/image_cache.json"]

# ãƒãƒ¼ãƒˆå…¬é–‹ï¼ˆWebãƒ“ãƒ¥ãƒ¼ã‚¢ãƒ¼ç”¨ï¼‰
EXPOSE 3000

CMD ["npm", "start"]
```

**docker-compose.yml:**

```yaml
version: "3.8"

services:
  sakurazaka-blog:
    build: .
    container_name: sakurazaka-blog
    volumes:
      - ./images:/app/images
      - ./sakurazaka_blog.db:/app/sakurazaka_blog.db
      - ./image_cache.json:/app/image_cache.json
    ports:
      - "3000:3000"
    restart: unless-stopped
    environment:
      - NODE_ENV=production
```

**ä½¿ç”¨æ–¹æ³•:**

```bash
# ã‚¤ãƒ¡ãƒ¼ã‚¸ãƒ“ãƒ«ãƒ‰ã¨èµ·å‹•
docker-compose up -d

# ãƒ­ã‚°ç¢ºèª
docker-compose logs -f

# ã‚³ãƒ³ãƒ†ãƒŠã«å…¥ã‚‹
docker-compose exec sakurazaka-blog bash

# åœæ­¢
docker-compose down
```

---

## åˆå›ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †

### 1. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®å–å¾—

**Git ã‚’ä½¿ç”¨ã™ã‚‹å ´åˆ:**

```bash
# ãƒªãƒã‚¸ãƒˆãƒªã‚’ã‚¯ãƒ­ãƒ¼ãƒ³
git clone <repository-url>
cd sakurazaka-blog-archive
```

**æ‰‹å‹•ã‚³ãƒ”ãƒ¼ã®å ´åˆ:**

```bash
# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œæˆ
mkdir sakurazaka-blog-archive
cd sakurazaka-blog-archive

# ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è»¢é€ï¼ˆscpã€rsyncã€ã¾ãŸã¯FTPãªã©ï¼‰
# ä¾‹: SCPã‚’ä½¿ç”¨
scp -r /path/to/local/sakurazaka-blog-archive/* user@remote:/path/to/sakurazaka-blog-archive/
```

### 2. ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
# Node.jsä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install

# Playwrightãƒ–ãƒ©ã‚¦ã‚¶ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npx playwright install chromium

# ã‚·ã‚¹ãƒ†ãƒ ä¾å­˜é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆLinuxï¼‰
npx playwright install-deps chromium
```

**Windows ã®å ´åˆ:**

```powershell
# ç®¡ç†è€…æ¨©é™ã§PowerShellã‚’é–‹ãå¿…è¦ãŒã‚ã‚‹å ´åˆãŒã‚ã‚Šã¾ã™
npm install
npx playwright install chromium
```

### 3. ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã®ç¢ºèª

ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å¾Œã€ä»¥ä¸‹ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã«ãªã£ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªï¼š

```
sakurazaka-blog-archive/
â”œâ”€â”€ node_modules/          # npmä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸
â”œâ”€â”€ public/                # é™çš„ãƒ•ã‚¡ã‚¤ãƒ«
â”‚   â””â”€â”€ css/
â”‚       â””â”€â”€ style.css
â”œâ”€â”€ views/                 # EJSãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
â”‚   â”œâ”€â”€ index.ejs
â”‚   â”œâ”€â”€ members.ejs
â”‚   â”œâ”€â”€ member.ejs
â”‚   â”œâ”€â”€ post.ejs
â”‚   â””â”€â”€ search.ejs
â”œâ”€â”€ images/                # ç”»åƒä¿å­˜å…ˆï¼ˆè‡ªå‹•ä½œæˆï¼‰
â”œâ”€â”€ blogScraper.js         # æ«»å‚46ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ‘ãƒ¼
â”œâ”€â”€ keyakiBlogScraper.js   # æ¬…å‚46ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ‘ãƒ¼
â”œâ”€â”€ fetchMembers.js        # ãƒ¡ãƒ³ãƒãƒ¼æƒ…å ±å–å¾—
â”œâ”€â”€ imageDownloader.js     # ç”»åƒãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
â”œâ”€â”€ database.js            # SQLiteãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
â”œâ”€â”€ webServer.js           # Expressã‚µãƒ¼ãƒãƒ¼
â”œâ”€â”€ index.js               # CLIãƒ¡ã‚¤ãƒ³ãƒ—ãƒ­ã‚°ãƒ©ãƒ 
â”œâ”€â”€ package.json           # ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­å®š
â”œâ”€â”€ sakurazaka_blog.db     # SQLiteãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ï¼ˆè‡ªå‹•ä½œæˆï¼‰
â”œâ”€â”€ image_cache.json       # ç”»åƒã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼ˆè‡ªå‹•ä½œæˆï¼‰
â””â”€â”€ README.md              # ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆèª¬æ˜
```

### 4. åˆå›èµ·å‹•ãƒ†ã‚¹ãƒˆ

```bash
# CLIãƒ¢ãƒ¼ãƒ‰ã§èµ·å‹•
npm start

# ã¾ãŸã¯ç›´æ¥å®Ÿè¡Œ
node index.js
```

æ­£å¸¸ã«èµ·å‹•ã™ã‚‹ã¨ä»¥ä¸‹ã®ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ï¼š

```
=== Sakurazaka46 Blog Tool ===

? What would you like to do? (Use arrow keys)
â¯ ğŸŒ Open member blog in browser
  ğŸ’¾ Scrape and save sakurazaka46 blog posts
  ğŸŒ³ Scrape Keyakizaka46 blog posts
  ğŸ” Search saved blog posts
  ğŸŒ Webãƒšãƒ¼ã‚¸ãƒ“ãƒ¥ãƒ¼ã‚¢ãƒ¼ã‚’èµ·å‹•
  âŒ Exit
```

### 5. Web ã‚µãƒ¼ãƒãƒ¼ãƒ¢ãƒ¼ãƒ‰ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰

```bash
# Web UIã§ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹å ´åˆ
node webServer.js

# ã¾ãŸã¯CLIã‹ã‚‰èµ·å‹•
npm start
# â†’ ã€ŒWebãƒšãƒ¼ã‚¸ãƒ“ãƒ¥ãƒ¼ã‚¢ãƒ¼ã‚’èµ·å‹•ã€ã‚’é¸æŠ
```

ãƒ–ãƒ©ã‚¦ã‚¶ã§ `http://localhost:3000` ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦å‹•ä½œç¢ºèª

---

## è¨­å®šã¨ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º

### ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸è¨­å®šï¼ˆconfig.jsï¼‰

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯`config.js`ã‚’ä½¿ç”¨ã—ã¦ç’°å¢ƒã«å¿œã˜ãŸã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸è¨­å®šã‚’ç®¡ç†ã—ã¾ã™ã€‚

**ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šï¼ˆãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒãƒ»EC2 ãªã©ï¼‰:**

```javascript
// config.js
const config = {
  storage: {
    type: "local", // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸
    local: {
      baseDir: __dirname,
      imagesDir: "images",
    },
  },
};
```

ã“ã®è¨­å®šã§ã¯ï¼š

- **ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºç’°å¢ƒ**: ãã®ã¾ã¾å‹•ä½œ
- **EC2/GCP/Azure**: ãã®ã¾ã¾å‹•ä½œï¼ˆè¿½åŠ è¨­å®šä¸è¦ï¼‰
- **Docker**: ãƒœãƒªãƒ¥ãƒ¼ãƒ ãƒã‚¦ãƒ³ãƒˆã§å‹•ä½œ
- ç”»åƒã¯`images/`ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ä¿å­˜ã•ã‚Œã€Express.static ã§é…ä¿¡

**S3 ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚’ä½¿ç”¨ã™ã‚‹å ´åˆ:**

ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®šï¼š

```bash
# .envãƒ•ã‚¡ã‚¤ãƒ«ã¾ãŸã¯ã‚·ã‚¹ãƒ†ãƒ ç’°å¢ƒå¤‰æ•°
STORAGE_TYPE=s3
S3_BUCKET=your-bucket-name
S3_REGION=ap-northeast-1
S3_BASE_URL=https://your-cloudfront-domain.cloudfront.net
# ã¾ãŸã¯S3ç›´æ¥: https://your-bucket.s3.ap-northeast-1.amazonaws.com
```

ã“ã®è¨­å®šã§ã¯ï¼š

- ç”»åƒã¯æŒ‡å®šã•ã‚ŒãŸãƒ™ãƒ¼ã‚¹ URL ã‹ã‚‰é…ä¿¡
- S3 ã¸ã®ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æ©Ÿèƒ½ã¯åˆ¥é€”å®Ÿè£…ãŒå¿…è¦
- CloudFront ã¨çµ„ã¿åˆã‚ã›ã‚‹ã“ã¨ã§ã‚°ãƒ­ãƒ¼ãƒãƒ«é…ä¿¡ãŒå¯èƒ½

**ç’°å¢ƒåˆ¥ã®å‹•ä½œ:**

| ç’°å¢ƒ            | STORAGE_TYPE        | è¨­å®š               | ç”»åƒ URL ä¾‹                                      |
| --------------- | ------------------- | ------------------ | ------------------------------------------------ |
| ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™º    | localï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰ | ä¸è¦               | `/images/member/post.jpg`                        |
| EC2             | localï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰ | ä¸è¦               | `/images/member/post.jpg`                        |
| Docker          | localï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰ | ãƒœãƒªãƒ¥ãƒ¼ãƒ ãƒã‚¦ãƒ³ãƒˆ | `/images/member/post.jpg`                        |
| S3 + CloudFront | s3                  | S3_BASE_URL è¨­å®š   | `https://cdn.example.com/images/member/post.jpg` |

### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­å®š

ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ SQLite ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚è¨­å®šã¯`config.js`ã§ç®¡ç†ã•ã‚Œã¾ã™ã€‚

```javascript
// config.js
const config = {
  database: {
    path: path.join(__dirname, "sakurazaka_blog.db"),
  },
};
```

### ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°è¨­å®š

#### ãƒ¬ãƒ¼ãƒˆåˆ¶é™ã®èª¿æ•´

**æ«»å‚ 46 (`blogScraper.js`):**

```javascript
const RATE_LIMIT = {
  REQUESTS_PER_MINUTE: 15, // 1åˆ†é–“ã®æœ€å¤§ãƒªã‚¯ã‚¨ã‚¹ãƒˆæ•°
  MIN_DELAY: 2000, // æœ€å°é…å»¶ï¼ˆãƒŸãƒªç§’ï¼‰
  MAX_DELAY: 4000, // æœ€å¤§é…å»¶ï¼ˆãƒŸãƒªç§’ï¼‰
  BURST_LIMIT: 10, // é€£ç¶šãƒªã‚¯ã‚¨ã‚¹ãƒˆåˆ¶é™
  LONG_BREAK: 5000, // é•·æ™‚é–“ä¼‘æ†©ï¼ˆãƒŸãƒªç§’ï¼‰
};
```

**æ¬…å‚ 46 (`keyakiBlogScraper.js`):**
åŒæ§˜ã®è¨­å®šãŒå¯èƒ½ã§ã™ã€‚

**æ³¨æ„:** ãƒ¬ãƒ¼ãƒˆåˆ¶é™ã‚’ç·©ã‚ã™ãã‚‹ã¨ã€å¯¾è±¡ã‚µã‚¤ãƒˆã‹ã‚‰ã‚¢ã‚¯ã‚»ã‚¹åˆ¶é™ã‚’å—ã‘ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚

#### ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆè¨­å®š

```javascript
// ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ
await page.goto(url, {
  waitUntil: "domcontentloaded",
  timeout: 30000, // 30ç§’ï¼ˆèª¿æ•´å¯èƒ½ï¼‰
});
```

### ç”»åƒä¿å­˜è¨­å®š

**`imageDownloader.js`:**

```javascript
// ç”»åƒä¿å­˜ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
const IMAGE_DIR = path.join(__dirname, "images");

// ä¸¦åˆ—ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰æ•°
const maxConcurrent = 3; // åŒæ™‚ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰æ•°ï¼ˆèª¿æ•´å¯èƒ½ï¼‰

// ãƒªãƒˆãƒ©ã‚¤å›æ•°
const retryCount = 3; // ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰å¤±æ•—æ™‚ã®ãƒªãƒˆãƒ©ã‚¤å›æ•°
```

### Web ã‚µãƒ¼ãƒãƒ¼è¨­å®š

**`webServer.js`:**

```javascript
const PORT = 3000; // ãƒãƒ¼ãƒˆç•ªå·ï¼ˆå¤‰æ›´å¯èƒ½ï¼‰

// æœ¬ç•ªç’°å¢ƒã§ãƒãƒ¼ãƒˆ80ã‚’ä½¿ç”¨ã™ã‚‹å ´åˆ
const PORT = process.env.PORT || 80;
```

**ãƒªãƒãƒ¼ã‚¹ãƒ—ãƒ­ã‚­ã‚·è¨­å®šï¼ˆNginx ä¾‹ï¼‰:**

```nginx
server {
    listen 80;
    server_name your-domain.com;

    location / {
        proxy_pass http://localhost:3000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
    }
}
```

---

## ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰å®Ÿè¡Œï¼ˆLinux/macOSï¼‰

### systemd ã‚µãƒ¼ãƒ“ã‚¹ï¼ˆæ¨å¥¨ï¼‰

**`/etc/systemd/system/sakurazaka-blog.service`:**

```ini
[Unit]
Description=Sakurazaka46 Blog Scraping Tool
After=network.target

[Service]
Type=simple
User=your-username
WorkingDirectory=/path/to/sakurazaka-blog-archive
ExecStart=/usr/bin/node /path/to/sakurazaka-blog-archive/webServer.js
Restart=on-failure
RestartSec=10
StandardOutput=syslog
StandardError=syslog
SyslogIdentifier=sakurazaka-blog

[Install]
WantedBy=multi-user.target
```

**ã‚µãƒ¼ãƒ“ã‚¹ã®ç®¡ç†:**

```bash
# ã‚µãƒ¼ãƒ“ã‚¹ã‚’æœ‰åŠ¹åŒ–
sudo systemctl enable sakurazaka-blog

# ã‚µãƒ¼ãƒ“ã‚¹ã‚’é–‹å§‹
sudo systemctl start sakurazaka-blog

# ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ç¢ºèª
sudo systemctl status sakurazaka-blog

# ãƒ­ã‚°ç¢ºèª
sudo journalctl -u sakurazaka-blog -f

# ã‚µãƒ¼ãƒ“ã‚¹ã‚’åœæ­¢
sudo systemctl stop sakurazaka-blog
```

### PM2ï¼ˆNode.js ãƒ—ãƒ­ã‚»ã‚¹ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ï¼‰

```bash
# PM2ã‚’ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install -g pm2

# ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’èµ·å‹•
pm2 start webServer.js --name sakurazaka-blog

# ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ç¢ºèª
pm2 status

# ãƒ­ã‚°ç¢ºèª
pm2 logs sakurazaka-blog

# å†èµ·å‹•
pm2 restart sakurazaka-blog

# åœæ­¢
pm2 stop sakurazaka-blog

# è‡ªå‹•èµ·å‹•è¨­å®š
pm2 startup
pm2 save
```

### screen/tmuxï¼ˆã‚·ãƒ³ãƒ—ãƒ«ãªæ–¹æ³•ï¼‰

```bash
# screenã‚’ä½¿ç”¨
screen -S sakurazaka
cd /path/to/sakurazaka-blog-archive
node webServer.js
# Ctrl+A â†’ D ã§ãƒ‡ã‚¿ãƒƒãƒ

# å†æ¥ç¶š
screen -r sakurazaka

# ã¾ãŸã¯ tmuxã‚’ä½¿ç”¨
tmux new -s sakurazaka
cd /path/to/sakurazaka-blog-archive
node webServer.js
# Ctrl+B â†’ D ã§ãƒ‡ã‚¿ãƒƒãƒ

# å†æ¥ç¶š
tmux attach -t sakurazaka
```

---

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### 1. Playwright ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚¨ãƒ©ãƒ¼

**ç—‡çŠ¶:** `npx playwright install`ãŒå¤±æ•—ã™ã‚‹

**è§£æ±ºç­–:**

```bash
# Linux: å¿…è¦ãªã‚·ã‚¹ãƒ†ãƒ ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
sudo npx playwright install-deps

# ç‰¹å®šã®ãƒ–ãƒ©ã‚¦ã‚¶ã®ã¿ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npx playwright install chromium

# ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ã‚¯ãƒªã‚¢ã—ã¦å†ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
rm -rf ~/.cache/ms-playwright
npx playwright install chromium
```

### 2. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ­ãƒƒã‚¯ã‚¨ãƒ©ãƒ¼

**ç—‡çŠ¶:** `SQLITE_BUSY: database is locked`

**è§£æ±ºç­–:**

```bash
# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«ã®æ¨©é™ã‚’ç¢ºèª
ls -l sakurazaka_blog.db

# æ¨©é™ã‚’ä¿®æ­£
chmod 664 sakurazaka_blog.db

# ãƒ—ãƒ­ã‚»ã‚¹ãŒé‡è¤‡ã—ã¦ã„ãªã„ã‹ç¢ºèª
ps aux | grep node
```

### 3. ãƒãƒ¼ãƒˆä½¿ç”¨ä¸­ã‚¨ãƒ©ãƒ¼

**ç—‡çŠ¶:** `EADDRINUSE: address already in use :::3000`

**è§£æ±ºç­–:**

```bash
# ãƒãƒ¼ãƒˆã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ãƒ—ãƒ­ã‚»ã‚¹ã‚’ç¢ºèª
# macOS/Linux
lsof -i :3000

# Windows
netstat -ano | findstr :3000

# ãƒ—ãƒ­ã‚»ã‚¹ã‚’çµ‚äº†
kill -9 <PID>

# ã¾ãŸã¯åˆ¥ã®ãƒãƒ¼ãƒˆã‚’ä½¿ç”¨
PORT=8080 node webServer.js
```

### 4. ãƒ¡ãƒ¢ãƒªä¸è¶³ã‚¨ãƒ©ãƒ¼

**ç—‡çŠ¶:** `JavaScript heap out of memory`

**è§£æ±ºç­–:**

```bash
# Node.jsã®ãƒ¡ãƒ¢ãƒªåˆ¶é™ã‚’å¢—ã‚„ã™
NODE_OPTIONS="--max-old-space-size=4096" node index.js

# ã¾ãŸã¯package.jsonã«è¿½åŠ 
"scripts": {
  "start": "NODE_OPTIONS='--max-old-space-size=4096' node index.js"
}
```

### 5. ç”»åƒãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã‚¨ãƒ©ãƒ¼

**ç—‡çŠ¶:** ç”»åƒãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ãŒå¤±æ•—ã™ã‚‹

**è§£æ±ºç­–:**

```bash
# ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®æ¨©é™ã‚’ç¢ºèª
ls -ld images/

# æ¨©é™ã‚’ä¿®æ­£
chmod 755 images/

# ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ã‚¯ãƒªã‚¢
rm image_cache.json

# ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ¥ç¶šã‚’ç¢ºèª
ping sakurazaka46.com
```

### 6. ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ã§ 0 ä»¶å–å¾—ã•ã‚Œã‚‹

**ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ:**

- [ ] ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆæ¥ç¶šãŒæ­£å¸¸ã‹
- [ ] å¯¾è±¡ã‚µã‚¤ãƒˆãŒã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½ã‹ï¼ˆãƒ–ãƒ©ã‚¦ã‚¶ã§ç¢ºèªï¼‰
- [ ] ãƒ¡ãƒ³ãƒãƒ¼ ID ãŒæ­£ã—ã„ã‹
- [ ] ãƒ¬ãƒ¼ãƒˆåˆ¶é™ã«å¼•ã£ã‹ã‹ã£ã¦ã„ãªã„ã‹

**ãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰:**

```bash
# ãƒ˜ãƒƒãƒ‰ãƒ¬ã‚¹ãƒ¢ãƒ¼ãƒ‰ã‚’ç„¡åŠ¹åŒ–ã—ã¦å‹•ä½œç¢ºèª
# blogScraper.js ã¾ãŸã¯ keyakiBlogScraper.jså†…
const browser = await chromium.launch({ headless: false });
```

---

## ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã¨ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹

### å®šæœŸãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—

**é‡è¦ãªãƒ•ã‚¡ã‚¤ãƒ«:**

- `sakurazaka_blog.db` - ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
- `images/` - ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸç”»åƒ
- `image_cache.json` - ç”»åƒã‚­ãƒ£ãƒƒã‚·ãƒ¥æƒ…å ±

**ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚¹ã‚¯ãƒªãƒ—ãƒˆä¾‹:**

```bash
#!/bin/bash
# backup.sh

BACKUP_DIR="/path/to/backup"
DATE=$(date +%Y%m%d_%H%M%S)
PROJECT_DIR="/path/to/sakurazaka-blog-archive"

mkdir -p $BACKUP_DIR

# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
cp $PROJECT_DIR/sakurazaka_blog.db $BACKUP_DIR/blogs_$DATE.db

# ç”»åƒã‚’ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ï¼ˆå¤§å®¹é‡ã®å ´åˆã¯æ³¨æ„ï¼‰
tar -czf $BACKUP_DIR/images_$DATE.tar.gz -C $PROJECT_DIR images/

# ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
cp $PROJECT_DIR/image_cache.json $BACKUP_DIR/image_cache_$DATE.json

# å¤ã„ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚’å‰Šé™¤ï¼ˆ30æ—¥ä»¥ä¸Šï¼‰
find $BACKUP_DIR -name "*.db" -mtime +30 -delete
find $BACKUP_DIR -name "*.tar.gz" -mtime +30 -delete

echo "Backup completed: $DATE"
```

**cron ã§è‡ªå‹•åŒ–:**

```bash
# crontabã‚’ç·¨é›†
crontab -e

# æ¯æ—¥åˆå‰3æ™‚ã«ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
0 3 * * * /path/to/backup.sh >> /var/log/sakurazaka-backup.log 2>&1
```

### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹

```bash
# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®æœ€é©åŒ–
sqlite3 sakurazaka_blog.db "VACUUM;"

# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®æ•´åˆæ€§ãƒã‚§ãƒƒã‚¯
sqlite3 sakurazaka_blog.db "PRAGMA integrity_check;"

# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚µã‚¤ã‚ºã®ç¢ºèª
du -h sakurazaka_blog.db
```

### ãƒ­ã‚°ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³

```bash
# /etc/logrotate.d/sakurazaka-blog
/var/log/sakurazaka-blog.log {
    daily
    rotate 7
    compress
    delaycompress
    missingok
    notifempty
}
```

---

## ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è€ƒæ…®äº‹é …

### 1. ãƒ•ã‚¡ã‚¤ã‚¢ã‚¦ã‚©ãƒ¼ãƒ«è¨­å®š

```bash
# UFW (Ubuntu)
sudo ufw allow 22/tcp   # SSH
sudo ufw allow 80/tcp   # HTTPï¼ˆå¿…è¦ãªå ´åˆã®ã¿ï¼‰
sudo ufw enable

# firewalld (CentOS)
sudo firewall-cmd --permanent --add-service=ssh
sudo firewall-cmd --permanent --add-service=http
sudo firewall-cmd --reload
```

### 2. é root ãƒ¦ãƒ¼ã‚¶ãƒ¼ã§å®Ÿè¡Œ

```bash
# å°‚ç”¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ä½œæˆ
sudo useradd -m -s /bin/bash sakurazaka
sudo su - sakurazaka

# ãƒ•ã‚¡ã‚¤ãƒ«ã®æ‰€æœ‰æ¨©ã‚’å¤‰æ›´
sudo chown -R sakurazaka:sakurazaka /path/to/sakurazaka-blog-archive
```

### 3. ã‚¢ã‚¯ã‚»ã‚¹åˆ¶é™ï¼ˆNginx Basic Auth ä¾‹ï¼‰

```nginx
location / {
    auth_basic "Restricted Access";
    auth_basic_user_file /etc/nginx/.htpasswd;
    proxy_pass http://localhost:3000;
}
```

```bash
# ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆ
sudo htpasswd -c /etc/nginx/.htpasswd username
```

### 4. HTTPS åŒ–ï¼ˆLet's Encryptï¼‰

```bash
# Certbotã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
sudo apt install certbot python3-certbot-nginx

# è¨¼æ˜æ›¸ã‚’å–å¾—
sudo certbot --nginx -d your-domain.com

# è‡ªå‹•æ›´æ–°ãƒ†ã‚¹ãƒˆ
sudo certbot renew --dry-run
```

---

## ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

### 1. ç”»åƒåœ§ç¸®

å¤§é‡ã®ç”»åƒã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚‹å ´åˆã€ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸å‰Šæ¸›ã®ãŸã‚ã«åœ§ç¸®ã‚’æ¤œè¨ï¼š

```bash
# ImageMagickã‚’ä½¿ç”¨
sudo apt install imagemagick

# ä¸€æ‹¬åœ§ç¸®ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
find images/ -name "*.jpg" -exec mogrify -quality 85 {} \;
```

### 2. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹

é »ç¹ã«æ¤œç´¢ã™ã‚‹å ´åˆã€ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’è¿½åŠ ï¼š

```sql
-- database.jsã«è¿½åŠ 
CREATE INDEX IF NOT EXISTS idx_member_id ON blog_posts(member_id);
CREATE INDEX IF NOT EXISTS idx_date ON blog_posts(date);
CREATE INDEX IF NOT EXISTS idx_site ON blog_posts(site);
```

### 3. ã‚­ãƒ£ãƒƒã‚·ãƒ¥æˆ¦ç•¥

Web ã‚µãƒ¼ãƒãƒ¼ã§ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’æœ‰åŠ¹åŒ–ï¼š

```javascript
// webServer.js
app.use(
  express.static("public", {
    maxAge: "1d", // é™çš„ãƒ•ã‚¡ã‚¤ãƒ«ã‚’1æ—¥ã‚­ãƒ£ãƒƒã‚·ãƒ¥
    etag: true,
  })
);
```

---

## ç’°å¢ƒå¤‰æ•°ã®ä½¿ç”¨

**`.env` ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰:**

```env
# ã‚µãƒ¼ãƒãƒ¼è¨­å®š
NODE_ENV=production
PORT=3000
HOST=0.0.0.0

# ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸è¨­å®š
STORAGE_TYPE=local              # 'local' ã¾ãŸã¯ 's3'
S3_BUCKET=your-bucket-name      # S3ä½¿ç”¨æ™‚ã®ã¿
S3_REGION=ap-northeast-1        # S3ä½¿ç”¨æ™‚ã®ã¿
S3_BASE_URL=https://cdn.example.com  # S3ä½¿ç”¨æ™‚ã®ã¿

# ãã®ä»–ï¼ˆå°†æ¥ã®æ‹¡å¼µç”¨ï¼‰
MAX_CONCURRENT_DOWNLOADS=3
RATE_LIMIT_PER_MINUTE=15
```

**ä½¿ç”¨æ–¹æ³•:**

```bash
# dotenvãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install dotenv

# ã‚³ãƒ¼ãƒ‰å†…ã§èª­ã¿è¾¼ã¿ï¼ˆconfig.jsã§æ—¢ã«å®Ÿè£…æ¸ˆã¿ï¼‰
require('dotenv').config();

const PORT = process.env.PORT || 3000;
```

**é‡è¦ãªæ³¨æ„äº‹é …:**

- **ãƒ­ãƒ¼ã‚«ãƒ«ãƒ»EC2ãƒ»Docker ç’°å¢ƒ**: `.env`ãƒ•ã‚¡ã‚¤ãƒ«ã¯ä¸è¦ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šã§å‹•ä½œï¼‰
- **S3 ä½¿ç”¨æ™‚ã®ã¿**: ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸é–¢é€£ã®ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®š
- `config.js`ãŒè‡ªå‹•çš„ã«ç’°å¢ƒå¤‰æ•°ã‚’èª­ã¿è¾¼ã¿ã€é©åˆ‡ãªè¨­å®šã‚’é©ç”¨

---

## ã¾ã¨ã‚

æœ¬ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«å¾“ã†ã“ã¨ã§ã€ä»¥ä¸‹ã®ç’°å¢ƒã«ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã§ãã¾ã™ï¼š

âœ… ãƒ­ãƒ¼ã‚«ãƒ« PCï¼ˆmacOS/Windows/Linuxï¼‰
âœ… AWS EC2ï¼ˆãƒ­ãƒ¼ã‚«ãƒ«ãƒ‡ã‚£ã‚¹ã‚¯ã¾ãŸã¯ S3ï¼‰
âœ… Google Cloud Platform
âœ… Azure VM
âœ… Docker ã‚³ãƒ³ãƒ†ãƒŠ

**ç’°å¢ƒåˆ¥ã®ç”»åƒã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸:**

| ç’°å¢ƒ          | ç”»åƒä¿å­˜å…ˆ         | è¨­å®š               |
| ------------- | ------------------ | ------------------ |
| ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™º  | ãƒ­ãƒ¼ã‚«ãƒ«ãƒ‡ã‚£ã‚¹ã‚¯   | ä¸è¦ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰ |
| EC2/GCP/Azure | ãƒ­ãƒ¼ã‚«ãƒ«ãƒ‡ã‚£ã‚¹ã‚¯   | ä¸è¦ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰ |
| EC2 + S3      | S3 + CloudFront    | ç’°å¢ƒå¤‰æ•°ã§è¨­å®š     |
| Docker        | ãƒœãƒªãƒ¥ãƒ¼ãƒ ãƒã‚¦ãƒ³ãƒˆ | docker-compose.yml |

**é‡è¦ãªãƒã‚¤ãƒ³ãƒˆ:**

ğŸ”¹ **ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå‹•ä½œ**: ãƒ­ãƒ¼ã‚«ãƒ«ãƒ»EC2ãƒ»GCPãƒ»Azure ã™ã¹ã¦ã§è¿½åŠ è¨­å®šãªã—ã§å‹•ä½œ
ğŸ”¹ **ç’°å¢ƒç§»è¡Œ**: `config.js`ã«ã‚ˆã‚Šã€ã‚³ãƒ¼ãƒ‰å¤‰æ›´ãªã—ã§ç’°å¢ƒåˆ‡ã‚Šæ›¿ãˆå¯èƒ½
ğŸ”¹ **æŸ”è»Ÿæ€§**: ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚¿ã‚¤ãƒ—ã‚’ç’°å¢ƒå¤‰æ•°ã§ç°¡å˜ã«åˆ‡ã‚Šæ›¿ãˆ

**æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—:**

1. è¦ä»¶ã«åˆã£ãŸç’°å¢ƒã‚’é¸æŠ
2. åˆå›ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚’å®Ÿè¡Œ
3. å¿…è¦ã«å¿œã˜ã¦ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸è¨­å®šã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºï¼ˆS3 ä½¿ç”¨æ™‚ã®ã¿ï¼‰
4. ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ä½“åˆ¶ã‚’æ§‹ç¯‰
5. æœ¬ç•ªé‹ç”¨é–‹å§‹

**ã‚µãƒãƒ¼ãƒˆ:**
å•é¡ŒãŒç™ºç”Ÿã—ãŸå ´åˆã¯ã€ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’å‚ç…§ã™ã‚‹ã‹ã€GitHub ã® Issue ã§å ±å‘Šã—ã¦ãã ã•ã„ã€‚
