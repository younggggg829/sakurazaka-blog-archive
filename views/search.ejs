<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title><%= title %></title>
  <link rel="stylesheet" href="/css/style.css">
</head>
<body>
  <div class="container">
    <header>
      <h1>🌸 櫻坂46 ブログアーカイブ</h1>
      <nav>
        <a href="/">ホーム</a>
        <a href="/search">検索</a>
      </nav>
    </header>

    <main>
      <div class="search-section">
        <h2>🔍 ブログ検索</h2>
        <form action="/search" method="get" class="search-form">
          <input
            type="text"
            name="q"
            value="<%= keyword %>"
            placeholder="キーワードを入力..."
            class="search-input"
          >
          <button type="submit" class="search-button">検索</button>
        </form>
      </div>

      <% if (keyword) { %>
        <div class="search-results">
          <h3>「<%= keyword %>」の検索結果: <%= posts.length %>件</h3>

          <% if (posts.length === 0) { %>
            <p>該当するブログが見つかりませんでした。</p>
          <% } else { %>
            <% posts.forEach(post => { %>
              <article class="blog-item">
                <a href="/post/<%= post.id %>">
                  <div class="blog-header">
                    <h4><%= post.title || 'タイトルなし' %></h4>
                    <div class="blog-info">
                      <span class="author"><%= post.member_name %></span>
                      <span class="date"><%= post.date %></span>
                    </div>
                  </div>
                  <div class="blog-preview">
                    <%= post.content ? post.content.substring(0, 200) + '...' : '' %>
                  </div>
                </a>
              </article>
            <% }) %>
          <% } %>
        </div>
      <% } %>
    </main>

    <footer>
      <p>&copy; 2025 櫻坂46 ブログアーカイブ</p>
    </footer>
  </div>

  <!-- ページトップへ戻るボタン -->
  <button id="scroll-to-top" onclick="scrollToTop()" title="ページトップへ戻る">
    ↑
  </button>

  <script>
    // ページトップへスクロール
    function scrollToTop() {
      window.scrollTo({
        top: 0,
        behavior: 'smooth'
      });
    }

    // スクロール時にボタンの表示/非表示を切り替え
    function toggleScrollButton() {
      const scrollButton = document.getElementById('scroll-to-top');
      if (window.pageYOffset > 300) {
        scrollButton.classList.add('show');
      } else {
        scrollButton.classList.remove('show');
      }
    }

    // ページロード時の設定
    document.addEventListener('DOMContentLoaded', function() {
      // スクロールイベントリスナーを追加
      window.addEventListener('scroll', toggleScrollButton);

      // 初期表示時もチェック
      toggleScrollButton();
    });
  </script>
</body>
</html>